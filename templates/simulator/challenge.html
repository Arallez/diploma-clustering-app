<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Challenge: {{ task.title }}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/static/css/challenge.css">
</head>
<body>

<div id="app">
  <header class="header">
    <a href="/"><strong>üè† Home</strong></a>
    <span class="breadcrumb-separator">/</span>
    <a href="/simulator/tasks/"><strong>üéØ Tasks</strong></a>
    <span class="breadcrumb-separator">/</span>
    <span class="breadcrumb-current">{% verbatim %}{{ task.title }}{% endverbatim %}</span>
    <a href="/simulator/" class="header-link-right">Simulator ‚Üí</a>
  </header>

  <div class="main">
    <div class="task-panel">
      <div class="task-title">{% verbatim %}{{ task.title }}{% endverbatim %}</div>
      <div class="task-desc">
        {% autoescape off %}
        {{ task.description }}
        {% endautoescape %}
      </div>
      
      <div class="task-desc runtime-info">
        <p><i>–°—Ä–µ–¥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: Python 3.11 (Pyodide) + NumPy.</i></p>
      </div>
    </div>

    {% verbatim %}
    <div class="editor-panel">
      <div id="editor-container"></div>
      <div class="toolbar">
        <div class="status-msg">
            <span v-if="isRunning" class="loading">‚è≥ –í—ã–ø–æ–ª–Ω—è–µ–º...</span>
            <span v-if="resultStatus === 'success'" class="success">‚úÖ {{ resultMessage }}</span>
            <span v-if="resultStatus === 'error'" class="error">‚ùå {{ resultMessage }}</span>
        </div>
        <button class="btn btn-reset" @click="resetCode">–°–±—Ä–æ—Å</button>
        <button class="btn btn-run" @click="runCode" :disabled="!isPyodideReady || isRunning">
          {{ isPyodideReady ? '‚ñ∂ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å' : '–ó–∞–≥—Ä—É–∑–∫–∞...' }}
        </button>
      </div>
    </div>
    {% endverbatim %}

  </div>
</div>

<!-- –í–Ω–µ—à–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ -->
<script src="https://cdn.jsdelivr.net/pyodide/v0.25.0/full/pyodide.js"></script>
<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.44.0/min/vs/loader.min.js"></script>

<!-- –ù–∞—à –∫–æ–¥ -->
<script src="/static/js/challenge.js"></script>
<script>
    // –ü–µ—Ä–µ–¥–∞—ë–º –¥–∞–Ω–Ω—ã–µ –∏–∑ Django –≤ JavaScript
    const taskData = {
        slug: "{{ task.slug }}",
        title: "{{ task.title }}",
        function_name: "{{ task.function_name }}",
        initial_code: `{{ task.initial_code|escapejs }}`,
        test_input: {{ task.test_input|safe }}
    };

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Vue-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    window.initChallengeApp(taskData).mount('#app');
</script>

</body>
</html>