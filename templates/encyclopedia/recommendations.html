{% extends 'base.html' %}
{% load static %}

{% block title %}–ê–¥–∞–ø—Ç–∏–≤–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ - {{ block.super }}{% endblock %}

{% block content %}
<div class="container py-4">
    <div class="row mb-4">
        <div class="col">
            <h1 class="mb-3">üìö –í–∞—à –ø—É—Ç—å –æ–±—É—á–µ–Ω–∏—è</h1>
            <p class="text-muted">
                –°–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤–∞—à–∏ —Ä–µ—à–µ–Ω–∏—è –∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –≥—Ä–∞—Ñ–∞ (OWL-–æ–Ω—Ç–æ–ª–æ–≥–∏–∏).
            </p>
        </div>
    </div>

    <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å -->
    <div class="row mb-5">
        <div class="col-md-12">
            <div class="card shadow-sm border-0">
                <div class="card-body">
                    <h5 class="card-title mb-4">–í–∞—à –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –∫–æ–Ω—Ü–µ–ø—Ç–∞–º</h5>
                    
                    <div class="progress mb-3" style="height: 25px;">
                        <div class="progress-bar bg-success" role="progressbar" 
                             style="width: {{ progress.progress_percent }}%;" 
                             aria-valuenow="{{ progress.progress_percent }}" aria-valuemin="0" aria-valuemax="100">
                            {{ progress.progress_percent }}%
                        </div>
                    </div>
                    
                    <div class="row text-center mt-4">
                        <div class="col-md-3">
                            <h3 class="text-success">{{ progress.learned_count }}</h3>
                            <span class="text-muted">–ò–∑—É—á–µ–Ω–æ –∫–æ–Ω—Ü–µ–ø—Ç–æ–≤</span>
                        </div>
                        <div class="col-md-3">
                            <h3>{{ progress.total_count }}</h3>
                            <span class="text-muted">–í—Å–µ–≥–æ –∫–æ–Ω—Ü–µ–ø—Ç–æ–≤</span>
                        </div>
                        <div class="col-md-3">
                            <h3 class="text-primary">{{ progress.available_tasks_count }}</h3>
                            <span class="text-muted">–î–æ—Å—Ç—É–ø–Ω–æ –∑–∞–¥–∞—á</span>
                        </div>
                        <div class="col-md-3">
                            <h3 class="text-secondary">{{ progress.blocked_tasks_count }}</h3>
                            <span class="text-muted">–ü–æ–∫–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ (–Ω—É–∂–Ω–∞ —Ç–µ–æ—Ä–∏—è)</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <!-- –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ -->
        <div class="col-md-6 mb-4">
            <h4 class="mb-3"><i class="bi bi-laptop text-primary"></i> –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –∑–∞–¥–∞—á–∏</h4>
            <p class="text-muted small">–í—ã —É–∂–µ –∑–Ω–∞–µ—Ç–µ –≤—Å–µ –ø—Ä–µ—Ä–µ–∫–≤–∏–∑–∏—Ç—ã –¥–ª—è —ç—Ç–∏—Ö –∑–∞–¥–∞—á.</p>
            
            {% if recommended_tasks %}
                <div class="list-group shadow-sm">
                {% for task in recommended_tasks %}
                    <a href="{% url 'tasks:challenge_detail' task.slug %}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                        <div>
                            <h6 class="mb-1">{{ task.title }}</h6>
                            <small class="text-muted">–°–≤—è–∑–∞–Ω–æ —Å: {{ task.concept.title }}</small>
                        </div>
                        <span class="badge bg-primary rounded-pill">–†–µ—à–∞—Ç—å</span>
                    </a>
                {% endfor %}
                </div>
            {% else %}
                <div class="alert alert-success">
                    –û—Ç–ª–∏—á–Ω–æ! –í—ã —Ä–µ—à–∏–ª–∏ –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –Ω–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –∑–∞–¥–∞—á–∏. –ò–∑—É—á–∏—Ç–µ –Ω–æ–≤—É—é —Ç–µ–æ—Ä–∏—é, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ.
                </div>
            {% endif %}
        </div>

        <!-- –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω–∞—è —Ç–µ–æ—Ä–∏—è -->
        <div class="col-md-6 mb-4">
            <h4 class="mb-3"><i class="bi bi-book text-warning"></i> –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è —Ç–µ–æ—Ä–∏—è</h4>
            <p class="text-muted small">–≠—Ç–∏ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –æ—Ç–∫—Ä–æ—é—Ç –≤–∞–º –¥–æ—Å—Ç—É–ø –∫ –Ω–æ–≤—ã–º –∑–∞–¥–∞—á–∞–º.</p>
            
            {% if recommended_materials %}
                <div class="list-group shadow-sm">
                {% for material in recommended_materials %}
                    <a href="{{ material.get_absolute_url }}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                        <div>
                            <h6 class="mb-1">{{ material.title }}</h6>
                            <small class="text-muted">–û—Ç–∫—Ä–æ–µ—Ç –Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ –ø–æ: {{ material.concept.title }}</small>
                        </div>
                        <span class="badge bg-warning text-dark rounded-pill">–ß–∏—Ç–∞—Ç—å</span>
                    </a>
                {% endfor %}
                </div>
            {% else %}
                <div class="alert alert-info">
                    –ü–æ–∫–∞ –Ω–µ—Ç –Ω–æ–≤—ã—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –ø–æ —Ç–µ–æ—Ä–∏–∏. –í—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Å—Ç–æ <a href="{% url 'encyclopedia:graph' %}" class="alert-link">–∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –≥—Ä–∞—Ñ –∑–Ω–∞–Ω–∏–π</a>.
                </div>
            {% endif %}
        </div>
    </div>
    
    <div class="text-center mt-4">
        <a href="{% url 'encyclopedia:graph' %}" class="btn btn-outline-secondary">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤–µ—Å—å –≥—Ä–∞—Ñ –∑–Ω–∞–Ω–∏–π</a>
    </div>
</div>
{% endblock %}
