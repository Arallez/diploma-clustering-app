{% extends 'base.html' %}

{% block title %}–£—á–µ–±–Ω—ã–µ –ó–∞–¥–∞—á–∏{% endblock %}

{% block content %}
<div class="tasks-container">
    <h1 class="page-title">üìö –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ó–∞–¥–∞—á–∏</h1>
    <p class="page-subtitle">–ù–∞—É—á–∏—Ç–µ—Å—å –ø–∏—Å–∞—Ç—å –∞–ª–≥–æ—Ä–∏—Ç–º—ã –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–∏ —Å –Ω—É–ª—è –Ω–∞ Python</p>

    <!-- Loop through Categories -->
    {% for category in categories %}
    <div class="algorithm-section">
        <h2 class="algo-title">{{ category.title }}</h2>
        <div class="task-grid">
            {% for task in category.tasks.all %}
            <a href="{% url 'simulator:challenge_detail' task.slug %}" class="task-card">
                <div class="task-header">
                    <span class="difficulty-badge level-{{ task.difficulty }}">
                        {% if task.difficulty == 1 %}‚≠ê Novice
                        {% elif task.difficulty == 2 %}‚≠ê‚≠ê Beginner
                        {% else %}‚≠ê‚≠ê‚≠ê Hard{% endif %}
                    </span>
                    <span class="task-order">#{{ task.order }}</span>
                </div>
                <h3 class="task-title">{{ task.title }}</h3>
                <div class="task-meta">
                    <span class="algo-tag">{{ task.get_algorithm_display }}</span>
                </div>
            </a>
            {% endfor %}
        </div>
    </div>
    {% endfor %}

    <!-- Uncategorized Tasks (Fallback) -->
    {% if uncategorized_tasks %}
    <div class="algorithm-section">
        <h2 class="algo-title">üîπ –†–∞–∑–Ω–æ–µ / –ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</h2>
        <div class="task-grid">
            {% for task in uncategorized_tasks %}
            <a href="{% url 'simulator:challenge_detail' task.slug %}" class="task-card">
                <div class="task-header">
                    <span class="difficulty-badge level-{{ task.difficulty }}">
                        {% if task.difficulty == 1 %}‚≠ê Novice
                        {% elif task.difficulty == 2 %}‚≠ê‚≠ê Beginner
                        {% else %}‚≠ê‚≠ê‚≠ê Hard{% endif %}
                    </span>
                    <span class="task-order">#{{ task.order }}</span>
                </div>
                <h3 class="task-title">{{ task.title }}</h3>
                <div class="task-meta">
                    <span class="algo-tag">{{ task.get_algorithm_display }}</span>
                </div>
            </a>
            {% endfor %}
        </div>
    </div>
    {% endif %}

    {% if not categories and not uncategorized_tasks %}
    <div class="empty-state">
        <p>–ó–∞–¥–∞—á –ø–æ–∫–∞ –Ω–µ—Ç. –ó–∞–≥–ª—è–Ω–∏—Ç–µ –ø–æ–∑–∂–µ!</p>
    </div>
    {% endif %}

</div>
{% endblock %}
