{% extends "admin/change_form.html" %}
{% load static %}
{% load i18n %}

{% block extrahead %}
{{ block.super }}
<link rel="stylesheet" type="text/css" href="{% static 'css/admin_tasks.css' %}">
{% endblock %}

{% block after_field_sets %}
{{ block.super }}

{% if show_quiz_constructor %}
<fieldset class="module aligned collapse" id="fieldset-quiz-constructor">
  <h2>üìù –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Ç–µ—Å—Ç–∞ (–¥–ª—è —Ç–∏–ø–∞ ¬´–í—ã–±–æ—Ä –æ—Ç–≤–µ—Ç–∞¬ª)</h2>
  <div class="quiz-constructor-content">
    <p class="help">–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–æ–ø—Ä–æ—Å–æ–≤. –£ –∫–∞–∂–¥–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞ ‚Äî —Å–≤–æ–∏ –≤–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–∞. ID –≤–∞—Ä–∏–∞–Ω—Ç–∞ (a, b, c‚Ä¶) –∑–∞–¥–∞—ë—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç –¥–ª—è —ç—Ç–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞.</p>

    <div id="quiz-questions-container">
      {% for q in quiz_questions %}
      <fieldset class="module aligned quiz-question-block" data-question-index="{{ forloop.counter0 }}">
        <h3>–í–æ–ø—Ä–æ—Å {{ forloop.counter }}</h3>
        <div class="form-row">
          <label>–¢–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞:</label>
          <textarea name="quiz_question_{{ forloop.counter0 }}" rows="2" style="width: 100%; max-width: 600px;">{{ q.question }}</textarea>
        </div>
        <div class="form-row">
          <label>–í–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–∞:</label>
          <table class="quiz-options-table">
            <thead>
              <tr><th>ID</th><th>–¢–µ–∫—Å—Ç</th><th style="width: 40px;"></th></tr>
            </thead>
            <tbody class="quiz-options-tbody" data-question-index="{{ forloop.counter0 }}">
              {% for opt in q.options %}
              <tr class="quiz-option-row">
                <td><input type="text" name="quiz_option_{{ forloop.parentloop.counter0 }}_{{ forloop.counter0 }}_id" value="{{ opt.id }}" maxlength="10" style="width: 50px;"></td>
                <td><input type="text" name="quiz_option_{{ forloop.parentloop.counter0 }}_{{ forloop.counter0 }}_text" value="{{ opt.text }}" style="width: 100%;"></td>
                <td><button type="button" class="deletelink remove-quiz-option">√ó</button></td>
              </tr>
              {% empty %}
              <tr class="quiz-option-row">
                <td><input type="text" name="quiz_option_{{ forloop.parentloop.counter0 }}_0_id" value="a" maxlength="10" style="width: 50px;"></td>
                <td><input type="text" name="quiz_option_{{ forloop.parentloop.counter0 }}_0_text" value="" style="width: 100%;"></td>
                <td><button type="button" class="deletelink remove-quiz-option">√ó</button></td>
              </tr>
              <tr class="quiz-option-row">
                <td><input type="text" name="quiz_option_{{ forloop.parentloop.counter0 }}_1_id" value="b" maxlength="10" style="width: 50px;"></td>
                <td><input type="text" name="quiz_option_{{ forloop.parentloop.counter0 }}_1_text" value="" style="width: 100%;"></td>
                <td><button type="button" class="deletelink remove-quiz-option">√ó</button></td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
          <p><button type="button" class="addlink add-quiz-option" data-question-index="{{ forloop.counter0 }}">–î–æ–±–∞–≤–∏—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç</button></p>
        </div>
        <div class="form-row">
          <label>–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç (ID –≤–∞—Ä–∏–∞–Ω—Ç–∞ –¥–ª—è —ç—Ç–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞):</label>
          <input type="text" name="quiz_correct_{{ forloop.counter0 }}" value="{{ q.correct }}" maxlength="10" style="width: 80px;">
        </div>
        <p><button type="button" class="deletelink remove-quiz-question">–£–¥–∞–ª–∏—Ç—å –≤–æ–ø—Ä–æ—Å</button></p>
      </fieldset>
      {% empty %}
      <fieldset class="module aligned quiz-question-block" data-question-index="0">
        <h3>–í–æ–ø—Ä–æ—Å 1</h3>
        <div class="form-row">
          <label>–¢–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞:</label>
          <textarea name="quiz_question_0" rows="2" style="width: 100%; max-width: 600px;"></textarea>
        </div>
        <div class="form-row">
          <label>–í–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–∞:</label>
          <table class="quiz-options-table">
            <thead>
              <tr><th>ID</th><th>–¢–µ–∫—Å—Ç</th><th style="width: 40px;"></th></tr>
            </thead>
            <tbody class="quiz-options-tbody" data-question-index="0">
              <tr class="quiz-option-row">
                <td><input type="text" name="quiz_option_0_0_id" value="a" maxlength="10" style="width: 50px;"></td>
                <td><input type="text" name="quiz_option_0_0_text" value="" style="width: 100%;"></td>
                <td><button type="button" class="deletelink remove-quiz-option">√ó</button></td>
              </tr>
              <tr class="quiz-option-row">
                <td><input type="text" name="quiz_option_0_1_id" value="b" maxlength="10" style="width: 50px;"></td>
                <td><input type="text" name="quiz_option_0_1_text" value="" style="width: 100%;"></td>
                <td><button type="button" class="deletelink remove-quiz-option">√ó</button></td>
              </tr>
            </tbody>
          </table>
          <p><button type="button" class="addlink add-quiz-option" data-question-index="0">–î–æ–±–∞–≤–∏—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç</button></p>
        </div>
        <div class="form-row">
          <label>–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç (ID):</label>
          <input type="text" name="quiz_correct_0" value="" maxlength="10" style="width: 80px;">
        </div>
        <p><button type="button" class="deletelink remove-quiz-question">–£–¥–∞–ª–∏—Ç—å –≤–æ–ø—Ä–æ—Å</button></p>
      </fieldset>
      {% endfor %}
    </div>

    <p style="margin-top: 12px;"><button type="button" id="add-quiz-question" class="addlink">–î–æ–±–∞–≤–∏—Ç—å –≤–æ–ø—Ä–æ—Å</button></p>
  </div>
</fieldset>

<script src="{% static 'js/admin_tasks.js' %}"></script>
{% endif %}
{% endblock %}
