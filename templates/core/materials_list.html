{% extends 'base.html' %}
{% load static %}

{% block title %}–£—á–µ–±–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã{% endblock %}

{% block extra_css %}
<!-- Custom styles for materials (No Bootstrap) -->
<link rel="stylesheet" href="{% static 'css/materials.css' %}">
{% endblock %}

{% block content %}
<div class="page-container">
    <div class="page-header">
        <h1 class="page-title">üìö –£—á–µ–±–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã</h1>
        <div class="page-subtitle">–¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–µ –æ—Å–Ω–æ–≤—ã, –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –∏ –∞–ª–≥–æ—Ä–∏—Ç–º—ã –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–∏</div>
    </div>
    
    {% if not tags and not untagged_materials %}
        <div class="content-panel" style="text-align: center; padding: 60px;">
            <h3>ü§∑‚Äç‚ôÇÔ∏è –ü–æ–∫–∞ –ø—É—Å—Ç–æ</h3>
            <p style="color: #94a3b8;">–ú–∞—Ç–µ—Ä–∏–∞–ª—ã –µ—â–µ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã. –ó–∞–π–¥–∏—Ç–µ –≤ –∞–¥–º–∏–Ω–∫—É.</p>
        </div>
    {% else %}
        
        <!-- –ú–∞—Ç–µ—Ä–∏–∞–ª—ã –ø–æ —Ç–µ–º–∞–º -->
        {% for tag in tags %}
            <h2 style="color: #94a3b8; margin: 40px 0 24px; font-size: 1.4rem; border-bottom: 1px solid #334155; padding-bottom: 12px; display: flex; align-items: center; gap: 10px;">
                <span style="background: rgba(59, 130, 246, 0.2); width: 8px; height: 8px; border-radius: 50%; display: inline-block;"></span>
                {{ tag.name }}
            </h2>
            <div class="materials-grid">
                {% for material in tag.materials.all %}
                <a href="{% url 'material_detail' material.slug %}" class="material-card">
                    <div class="card-badge">
                        –¢–µ–æ—Ä–∏—è #{{ material.order }}
                    </div>
                    <h3 class="card-title">{{ material.title }}</h3>
                    <div class="card-footer">
                        <span>üóì {{ material.updated_at|date:"d.m.Y" }}</span>
                        <span class="read-link">–ß–∏—Ç–∞—Ç—å ‚Üí</span>
                    </div>
                </a>
                {% endfor %}
            </div>
        {% endfor %}

        <!-- –û–±—â–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã (–±–µ–∑ —Ç–µ–≥–æ–≤) -->
        {% if untagged_materials %}
            {% if tags %}
                <h2 style="color: #94a3b8; margin: 50px 0 24px; font-size: 1.4rem; border-bottom: 1px solid #334155; padding-bottom: 12px; display: flex; align-items: center; gap: 10px;">
                    <span style="background: rgba(148, 163, 184, 0.2); width: 8px; height: 8px; border-radius: 50%; display: inline-block;"></span>
                    –û–±—â–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
                </h2>
            {% endif %}
            
            <div class="materials-grid">
                {% for material in untagged_materials %}
                <a href="{% url 'material_detail' material.slug %}" class="material-card">
                    <div class="card-badge" style="background: rgba(148, 163, 184, 0.15); color: #cbd5e1; border-color: rgba(148, 163, 184, 0.25);">
                        –¢–µ–æ—Ä–∏—è #{{ material.order }}
                    </div>
                    <h3 class="card-title">{{ material.title }}</h3>
                    <div class="card-footer">
                        <span>üóì {{ material.updated_at|date:"d.m.Y" }}</span>
                        <span class="read-link">–ß–∏—Ç–∞—Ç—å ‚Üí</span>
                    </div>
                </a>
                {% endfor %}
            </div>
        {% endif %}

    {% endif %}
</div>
{% endblock %}
